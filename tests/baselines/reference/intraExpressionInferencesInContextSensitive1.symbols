//// [tests/cases/conformance/types/typeRelationships/typeInference/intraExpressionInferencesInContextSensitive1.ts] ////

=== intraExpressionInferencesInContextSensitive1.ts ===
type Options<TContext> = {
>Options : Symbol(Options, Decl(intraExpressionInferencesInContextSensitive1.ts, 0, 0))
>TContext : Symbol(TContext, Decl(intraExpressionInferencesInContextSensitive1.ts, 0, 13))

  onStart?: (arg: number) => TContext;
>onStart : Symbol(onStart, Decl(intraExpressionInferencesInContextSensitive1.ts, 0, 26))
>arg : Symbol(arg, Decl(intraExpressionInferencesInContextSensitive1.ts, 1, 13))
>TContext : Symbol(TContext, Decl(intraExpressionInferencesInContextSensitive1.ts, 0, 13))

  onEnd?: (context: TContext) => void;
>onEnd : Symbol(onEnd, Decl(intraExpressionInferencesInContextSensitive1.ts, 1, 38))
>context : Symbol(context, Decl(intraExpressionInferencesInContextSensitive1.ts, 2, 11))
>TContext : Symbol(TContext, Decl(intraExpressionInferencesInContextSensitive1.ts, 0, 13))

};

function create<TContext>(builder: (arg: boolean) => Options<TContext>) {
>create : Symbol(create, Decl(intraExpressionInferencesInContextSensitive1.ts, 3, 2))
>TContext : Symbol(TContext, Decl(intraExpressionInferencesInContextSensitive1.ts, 5, 16))
>builder : Symbol(builder, Decl(intraExpressionInferencesInContextSensitive1.ts, 5, 26))
>arg : Symbol(arg, Decl(intraExpressionInferencesInContextSensitive1.ts, 5, 36))
>Options : Symbol(Options, Decl(intraExpressionInferencesInContextSensitive1.ts, 0, 0))
>TContext : Symbol(TContext, Decl(intraExpressionInferencesInContextSensitive1.ts, 5, 16))

  return builder(true);
>builder : Symbol(builder, Decl(intraExpressionInferencesInContextSensitive1.ts, 5, 26))
}

create((arg) => ({
>create : Symbol(create, Decl(intraExpressionInferencesInContextSensitive1.ts, 3, 2))
>arg : Symbol(arg, Decl(intraExpressionInferencesInContextSensitive1.ts, 9, 8))

  onStart: (arg) => ({ time: new Date() }),
>onStart : Symbol(onStart, Decl(intraExpressionInferencesInContextSensitive1.ts, 9, 18))
>arg : Symbol(arg, Decl(intraExpressionInferencesInContextSensitive1.ts, 10, 12))
>time : Symbol(time, Decl(intraExpressionInferencesInContextSensitive1.ts, 10, 22))
>Date : Symbol(Date, Decl(lib.es5.d.ts, --, --), Decl(lib.es5.d.ts, --, --), Decl(lib.es5.d.ts, --, --), Decl(lib.scripthost.d.ts, --, --))

  onEnd: (context) => {},
>onEnd : Symbol(onEnd, Decl(intraExpressionInferencesInContextSensitive1.ts, 10, 43))
>context : Symbol(context, Decl(intraExpressionInferencesInContextSensitive1.ts, 11, 10))

}));

type Schema = Record<string, unknown>;
>Schema : Symbol(Schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 12, 4))
>Record : Symbol(Record, Decl(lib.es5.d.ts, --, --))

type StepFunction<TSchema extends Schema = Schema> = (anything: unknown) => {
>StepFunction : Symbol(StepFunction, Decl(intraExpressionInferencesInContextSensitive1.ts, 14, 38))
>TSchema : Symbol(TSchema, Decl(intraExpressionInferencesInContextSensitive1.ts, 16, 18))
>Schema : Symbol(Schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 12, 4))
>Schema : Symbol(Schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 12, 4))
>anything : Symbol(anything, Decl(intraExpressionInferencesInContextSensitive1.ts, 16, 54))

  readonly schema: (thing: number) => TSchema;
>schema : Symbol(schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 16, 77))
>thing : Symbol(thing, Decl(intraExpressionInferencesInContextSensitive1.ts, 17, 20))
>TSchema : Symbol(TSchema, Decl(intraExpressionInferencesInContextSensitive1.ts, 16, 18))

  readonly toAnswers?: (keys: keyof TSchema) => unknown;
>toAnswers : Symbol(toAnswers, Decl(intraExpressionInferencesInContextSensitive1.ts, 17, 46))
>keys : Symbol(keys, Decl(intraExpressionInferencesInContextSensitive1.ts, 18, 24))
>TSchema : Symbol(TSchema, Decl(intraExpressionInferencesInContextSensitive1.ts, 16, 18))

};

function step<TSchema extends Schema = Schema>(
>step : Symbol(step, Decl(intraExpressionInferencesInContextSensitive1.ts, 19, 2))
>TSchema : Symbol(TSchema, Decl(intraExpressionInferencesInContextSensitive1.ts, 21, 14))
>Schema : Symbol(Schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 12, 4))
>Schema : Symbol(Schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 12, 4))

  stepVal: StepFunction<TSchema>,
>stepVal : Symbol(stepVal, Decl(intraExpressionInferencesInContextSensitive1.ts, 21, 47))
>StepFunction : Symbol(StepFunction, Decl(intraExpressionInferencesInContextSensitive1.ts, 14, 38))
>TSchema : Symbol(TSchema, Decl(intraExpressionInferencesInContextSensitive1.ts, 21, 14))

): StepFunction<TSchema> {
>StepFunction : Symbol(StepFunction, Decl(intraExpressionInferencesInContextSensitive1.ts, 14, 38))
>TSchema : Symbol(TSchema, Decl(intraExpressionInferencesInContextSensitive1.ts, 21, 14))

  return stepVal;
>stepVal : Symbol(stepVal, Decl(intraExpressionInferencesInContextSensitive1.ts, 21, 47))
}

const stepResult = step((_something) => ({
>stepResult : Symbol(stepResult, Decl(intraExpressionInferencesInContextSensitive1.ts, 27, 5))
>step : Symbol(step, Decl(intraExpressionInferencesInContextSensitive1.ts, 19, 2))
>_something : Symbol(_something, Decl(intraExpressionInferencesInContextSensitive1.ts, 27, 25))

  schema: (thing) => ({
>schema : Symbol(schema, Decl(intraExpressionInferencesInContextSensitive1.ts, 27, 42))
>thing : Symbol(thing, Decl(intraExpressionInferencesInContextSensitive1.ts, 28, 11))

    attribute: "anything",
>attribute : Symbol(attribute, Decl(intraExpressionInferencesInContextSensitive1.ts, 28, 23))

  }),
  toAnswers: (keys) => {
>toAnswers : Symbol(toAnswers, Decl(intraExpressionInferencesInContextSensitive1.ts, 30, 5))
>keys : Symbol(keys, Decl(intraExpressionInferencesInContextSensitive1.ts, 31, 14))

    type Test = string extends typeof keys ? never : "true";
>Test : Symbol(Test, Decl(intraExpressionInferencesInContextSensitive1.ts, 31, 24))
>keys : Symbol(keys, Decl(intraExpressionInferencesInContextSensitive1.ts, 31, 14))

    const test: Test = "true"; // ok
>test : Symbol(test, Decl(intraExpressionInferencesInContextSensitive1.ts, 33, 9))
>Test : Symbol(Test, Decl(intraExpressionInferencesInContextSensitive1.ts, 31, 24))

    return { test };
>test : Symbol(test, Decl(intraExpressionInferencesInContextSensitive1.ts, 34, 12))

  },
}));

