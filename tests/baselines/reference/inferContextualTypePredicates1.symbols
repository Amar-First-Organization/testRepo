//// [tests/cases/compiler/inferContextualTypePredicates1.ts] ////

=== inferContextualTypePredicates1.ts ===
type Foo = { type: "foo"; foo: number };
>Foo : Symbol(Foo, Decl(inferContextualTypePredicates1.ts, 0, 0))
>type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 0, 12))
>foo : Symbol(foo, Decl(inferContextualTypePredicates1.ts, 0, 25))

type Bar = { type: "bar"; bar: string };
>Bar : Symbol(Bar, Decl(inferContextualTypePredicates1.ts, 0, 40))
>type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 1, 12))
>bar : Symbol(bar, Decl(inferContextualTypePredicates1.ts, 1, 25))

declare function skipIf<A, B extends A>(
>skipIf : Symbol(skipIf, Decl(inferContextualTypePredicates1.ts, 1, 40))
>A : Symbol(A, Decl(inferContextualTypePredicates1.ts, 3, 24))
>B : Symbol(B, Decl(inferContextualTypePredicates1.ts, 3, 26))
>A : Symbol(A, Decl(inferContextualTypePredicates1.ts, 3, 24))

  as: A[],
>as : Symbol(as, Decl(inferContextualTypePredicates1.ts, 3, 40))
>A : Symbol(A, Decl(inferContextualTypePredicates1.ts, 3, 24))

  predicate: (a: A) => a is B,
>predicate : Symbol(predicate, Decl(inferContextualTypePredicates1.ts, 4, 10))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 5, 14))
>A : Symbol(A, Decl(inferContextualTypePredicates1.ts, 3, 24))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 5, 14))
>B : Symbol(B, Decl(inferContextualTypePredicates1.ts, 3, 26))

): Exclude<A, B>[];
>Exclude : Symbol(Exclude, Decl(lib.es5.d.ts, --, --))
>A : Symbol(A, Decl(inferContextualTypePredicates1.ts, 3, 24))
>B : Symbol(B, Decl(inferContextualTypePredicates1.ts, 3, 26))

declare const items: (Foo | Bar)[];
>items : Symbol(items, Decl(inferContextualTypePredicates1.ts, 8, 13))
>Foo : Symbol(Foo, Decl(inferContextualTypePredicates1.ts, 0, 0))
>Bar : Symbol(Bar, Decl(inferContextualTypePredicates1.ts, 0, 40))

const r1 = skipIf(items, (item) => item.type === "foo"); // ok
>r1 : Symbol(r1, Decl(inferContextualTypePredicates1.ts, 10, 5))
>skipIf : Symbol(skipIf, Decl(inferContextualTypePredicates1.ts, 1, 40))
>items : Symbol(items, Decl(inferContextualTypePredicates1.ts, 8, 13))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 10, 26))
>item.type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 0, 12), Decl(inferContextualTypePredicates1.ts, 1, 12))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 10, 26))
>type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 0, 12), Decl(inferContextualTypePredicates1.ts, 1, 12))

const r2 = skipIf(items, (item) => item.type === "foo" || item.type === "bar"); // ok
>r2 : Symbol(r2, Decl(inferContextualTypePredicates1.ts, 11, 5))
>skipIf : Symbol(skipIf, Decl(inferContextualTypePredicates1.ts, 1, 40))
>items : Symbol(items, Decl(inferContextualTypePredicates1.ts, 8, 13))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 11, 26))
>item.type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 0, 12), Decl(inferContextualTypePredicates1.ts, 1, 12))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 11, 26))
>type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 0, 12), Decl(inferContextualTypePredicates1.ts, 1, 12))
>item.type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 1, 12))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 11, 26))
>type : Symbol(type, Decl(inferContextualTypePredicates1.ts, 1, 12))

const r3 = skipIf(items, (item) => false); // ok
>r3 : Symbol(r3, Decl(inferContextualTypePredicates1.ts, 12, 5))
>skipIf : Symbol(skipIf, Decl(inferContextualTypePredicates1.ts, 1, 40))
>items : Symbol(items, Decl(inferContextualTypePredicates1.ts, 8, 13))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 12, 26))

const r4 = skipIf(items, (item) => true); // ok
>r4 : Symbol(r4, Decl(inferContextualTypePredicates1.ts, 13, 5))
>skipIf : Symbol(skipIf, Decl(inferContextualTypePredicates1.ts, 1, 40))
>items : Symbol(items, Decl(inferContextualTypePredicates1.ts, 8, 13))
>item : Symbol(item, Decl(inferContextualTypePredicates1.ts, 13, 26))

const pred1: (a: string | null, b: string | null) => b is string = (a, b) => typeof b === 'string'; // ok
>pred1 : Symbol(pred1, Decl(inferContextualTypePredicates1.ts, 15, 5))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 15, 14))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 15, 31))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 15, 31))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 15, 68))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 15, 70))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 15, 70))

const pred2: (a: string | null, b: string | null) => b is string = (a, b) => typeof a === 'string'; // error
>pred2 : Symbol(pred2, Decl(inferContextualTypePredicates1.ts, 16, 5))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 16, 14))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 16, 31))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 16, 31))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 16, 68))
>b : Symbol(b, Decl(inferContextualTypePredicates1.ts, 16, 70))
>a : Symbol(a, Decl(inferContextualTypePredicates1.ts, 16, 68))

export declare function every<T, U extends T>(array: readonly T[], callback: (element: T, index: number) => element is U): array is readonly U[];
>every : Symbol(every, Decl(inferContextualTypePredicates1.ts, 16, 99), Decl(inferContextualTypePredicates1.ts, 18, 145), Decl(inferContextualTypePredicates1.ts, 19, 169))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 18, 30))
>U : Symbol(U, Decl(inferContextualTypePredicates1.ts, 18, 32))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 18, 30))
>array : Symbol(array, Decl(inferContextualTypePredicates1.ts, 18, 46))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 18, 30))
>callback : Symbol(callback, Decl(inferContextualTypePredicates1.ts, 18, 66))
>element : Symbol(element, Decl(inferContextualTypePredicates1.ts, 18, 78))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 18, 30))
>index : Symbol(index, Decl(inferContextualTypePredicates1.ts, 18, 89))
>element : Symbol(element, Decl(inferContextualTypePredicates1.ts, 18, 78))
>U : Symbol(U, Decl(inferContextualTypePredicates1.ts, 18, 32))
>array : Symbol(array, Decl(inferContextualTypePredicates1.ts, 18, 46))
>U : Symbol(U, Decl(inferContextualTypePredicates1.ts, 18, 32))

export declare function every<T, U extends T>(array: readonly T[] | undefined, callback: (element: T, index: number) => element is U): array is readonly U[] | undefined;
>every : Symbol(every, Decl(inferContextualTypePredicates1.ts, 16, 99), Decl(inferContextualTypePredicates1.ts, 18, 145), Decl(inferContextualTypePredicates1.ts, 19, 169))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 19, 30))
>U : Symbol(U, Decl(inferContextualTypePredicates1.ts, 19, 32))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 19, 30))
>array : Symbol(array, Decl(inferContextualTypePredicates1.ts, 19, 46))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 19, 30))
>callback : Symbol(callback, Decl(inferContextualTypePredicates1.ts, 19, 78))
>element : Symbol(element, Decl(inferContextualTypePredicates1.ts, 19, 90))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 19, 30))
>index : Symbol(index, Decl(inferContextualTypePredicates1.ts, 19, 101))
>element : Symbol(element, Decl(inferContextualTypePredicates1.ts, 19, 90))
>U : Symbol(U, Decl(inferContextualTypePredicates1.ts, 19, 32))
>array : Symbol(array, Decl(inferContextualTypePredicates1.ts, 19, 46))
>U : Symbol(U, Decl(inferContextualTypePredicates1.ts, 19, 32))

export declare function every<T>(array: readonly T[] | undefined, callback: (element: T, index: number) => boolean): boolean;
>every : Symbol(every, Decl(inferContextualTypePredicates1.ts, 16, 99), Decl(inferContextualTypePredicates1.ts, 18, 145), Decl(inferContextualTypePredicates1.ts, 19, 169))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 20, 30))
>array : Symbol(array, Decl(inferContextualTypePredicates1.ts, 20, 33))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 20, 30))
>callback : Symbol(callback, Decl(inferContextualTypePredicates1.ts, 20, 65))
>element : Symbol(element, Decl(inferContextualTypePredicates1.ts, 20, 77))
>T : Symbol(T, Decl(inferContextualTypePredicates1.ts, 20, 30))
>index : Symbol(index, Decl(inferContextualTypePredicates1.ts, 20, 88))

type Type = {
>Type : Symbol(Type, Decl(inferContextualTypePredicates1.ts, 20, 125))

  kind: number;
>kind : Symbol(kind, Decl(inferContextualTypePredicates1.ts, 22, 13))

  flags: number;
>flags : Symbol(flags, Decl(inferContextualTypePredicates1.ts, 23, 15))

};

function testEvery(typeSet: Type[]) {
>testEvery : Symbol(testEvery, Decl(inferContextualTypePredicates1.ts, 25, 2))
>typeSet : Symbol(typeSet, Decl(inferContextualTypePredicates1.ts, 27, 19))
>Type : Symbol(Type, Decl(inferContextualTypePredicates1.ts, 20, 125))

  if (every(typeSet, (t) => t.kind === 1)) {
>every : Symbol(every, Decl(inferContextualTypePredicates1.ts, 16, 99), Decl(inferContextualTypePredicates1.ts, 18, 145), Decl(inferContextualTypePredicates1.ts, 19, 169))
>typeSet : Symbol(typeSet, Decl(inferContextualTypePredicates1.ts, 27, 19))
>t : Symbol(t, Decl(inferContextualTypePredicates1.ts, 28, 22))
>t.kind : Symbol(kind, Decl(inferContextualTypePredicates1.ts, 22, 13))
>t : Symbol(t, Decl(inferContextualTypePredicates1.ts, 28, 22))
>kind : Symbol(kind, Decl(inferContextualTypePredicates1.ts, 22, 13))

    return 1;
  }
  if (every(typeSet, (t) => t.kind === 2)) {
>every : Symbol(every, Decl(inferContextualTypePredicates1.ts, 16, 99), Decl(inferContextualTypePredicates1.ts, 18, 145), Decl(inferContextualTypePredicates1.ts, 19, 169))
>typeSet : Symbol(typeSet, Decl(inferContextualTypePredicates1.ts, 27, 19))
>t : Symbol(t, Decl(inferContextualTypePredicates1.ts, 31, 22))
>t.kind : Symbol(kind, Decl(inferContextualTypePredicates1.ts, 22, 13))
>t : Symbol(t, Decl(inferContextualTypePredicates1.ts, 31, 22))
>kind : Symbol(kind, Decl(inferContextualTypePredicates1.ts, 22, 13))

    return 2;
  }
  return -1;
}

