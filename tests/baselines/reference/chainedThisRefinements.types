=== tests/cases/compiler/chainedThisRefinements.ts ===
class Builder {
>Builder : Builder

    private _class: undefined;
>_class : undefined

    withFoo<T>() {
>withFoo : <T>() => this & { foo: T; }

        return this as this & { foo: T }
>this as this & { foo: T } : this & { foo: T; }
>this : this
>foo : T
    }
    withBar<T>() {
>withBar : <T>() => this & { bar: T; }

        return this as this & { bar: T }
>this as this & { bar: T } : this & { bar: T; }
>this : this
>bar : T
    }
    withFooBar<T>() {
>withFooBar : <T>() => this & { foo: T; } & { bar: T; }

        return this.withFoo<T>().withBar<T>();
>this.withFoo<T>().withBar<T>() : this & { foo: T; } & { bar: T; }
>this.withFoo<T>().withBar : <T>() => this & { foo: T; } & { bar: T; }
>this.withFoo<T>() : this & { foo: T; }
>this.withFoo : <T>() => this & { foo: T; }
>this : this
>withFoo : <T>() => this & { foo: T; }
>withBar : <T>() => this & { foo: T; } & { bar: T; }
    }
}

declare var f: {foo: number};
>f : { foo: number; }
>foo : number

f = new Builder().withFooBar<number>(); // should work
>f = new Builder().withFooBar<number>() : Builder & { foo: number; } & { bar: number; }
>f : { foo: number; }
>new Builder().withFooBar<number>() : Builder & { foo: number; } & { bar: number; }
>new Builder().withFooBar : <T>() => Builder & { foo: T; } & { bar: T; }
>new Builder() : Builder
>Builder : typeof Builder
>withFooBar : <T>() => Builder & { foo: T; } & { bar: T; }

