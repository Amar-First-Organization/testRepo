// [[Reason: undefined]] ////

//// [tests/cases/conformance/types/thisType/declarationFiles.ts] ////

===================================================================
--- TSC	declarations
+++ DTE	declarations
@@ -28,28 +28,30 @@
 declare const x3_a: typeof globalThis;
 declare const x1_a: typeof globalThis;
 declare class C4 {
     x1: {
-        a: typeof globalThis;
+        a: typeof x1_a;
     };
     x2: this[];
     x3: readonly [{
-        readonly a: typeof globalThis;
+        readonly a: typeof x3_a;
     }];
     x4: () => this;
-    f1(): any;
+    f1(): invalid;
     f2(): this[];
-    f3(): any;
+    f3(): invalid;
     f4(): () => this;
 }
 /// [Errors] ////
 
 declarationFiles.ts(4,20): error TS2526: A 'this' type is available only in a non-static member of a class or interface.
 declarationFiles.ts(36,5): error TS2527: The inferred type of 'f1' references an inaccessible 'this' type. A type annotation is necessary.
+declarationFiles.ts(36,5): error TS9007: Declaration emit for this file requires type resolution. An explicit type annotation may unblock declaration emit.
 declarationFiles.ts(42,5): error TS2527: The inferred type of 'f3' references an inaccessible 'this' type. A type annotation is necessary.
+declarationFiles.ts(42,5): error TS9007: Declaration emit for this file requires type resolution. An explicit type annotation may unblock declaration emit.
 
 
-==== declarationFiles.ts (3 errors) ====
+==== declarationFiles.ts (5 errors) ====
     class C1 {
         x: this;
         f(x: this): this { return undefined; }
         constructor(x: this) { }
@@ -88,16 +90,20 @@
         x4 = (): this => this;
         f1() {
         ~~
 !!! error TS2527: The inferred type of 'f1' references an inaccessible 'this' type. A type annotation is necessary.
+        ~~
+!!! error TS9007: Declaration emit for this file requires type resolution. An explicit type annotation may unblock declaration emit.
             return { a: this };
         }
         f2(): this[] {
             return [this];
         }
         f3() {
         ~~
 !!! error TS2527: The inferred type of 'f3' references an inaccessible 'this' type. A type annotation is necessary.
+        ~~
+!!! error TS9007: Declaration emit for this file requires type resolution. An explicit type annotation may unblock declaration emit.
             return [{ a: this }];
         }
         f4(): () => this {
             return () => this;
